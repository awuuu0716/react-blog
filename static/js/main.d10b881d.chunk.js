(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{39:function(n,t,e){"use strict";e.r(t);var r=e(1),c=e(0),i=e(20),o=e.n(i),a=e(5),u=e(2),s=e(3),b=e(10),j=e(4),d="token",f=function(n){localStorage.setItem(d,n)},l=function(){return localStorage.getItem(d)},p="https://student-json-api.lidemy.me",h=function(n){return fetch("".concat(p,"/posts?_page=").concat(n,"&_limit=5&_sort=id&_order=desc")).then((function(n){return n.json()}))},x=function(){var n=l();return fetch("".concat(p,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},O=Object(c.createContext)(null);function g(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 500px;\n  height: 120px;\n  padding: 20px;\n  margin: 100px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return g=function(){return n},n}function v(){var n=Object(u.a)(["\n  color: red;\n"]);return v=function(){return n},n}var m=s.a.div(v()),w=s.a.form(g());function y(){var n=Object(c.useContext)(O).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),i=e[0],o=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),b=s[0],d=s[1],l=Object(c.useState)(""),h=Object(a.a)(l,2),g=h[0],v=h[1],y=Object(j.f)();return Object(r.jsxs)(w,{onSubmit:function(t){v(""),t.preventDefault(),function(n,t){return fetch("".concat(p,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:t})}).then((function(n){return n.json()}))}(i,b).then((function(t){if(0===t.ok)return v(t.message);f(t.token),x().then((function(t){if(1!==t.ok)return f(""),v(t.toString());n(t.data),y.push("/")}))}))},children:[Object(r.jsxs)("div",{children:["username:",Object(r.jsx)("input",{value:i,onChange:function(n){return o(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["password:",Object(r.jsx)("input",{value:b,type:"password",onChange:function(n){return d(n.target.value)},required:!0})]}),Object(r.jsx)("button",{type:"submit",children:"Log in"}),g&&Object(r.jsx)(m,{children:g})]})}function S(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  width: 500px;\n  height: 120px;\n  padding: 20px;\n  margin: 100px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return S=function(){return n},n}function k(){var n=Object(u.a)(["\n  color: red;\n"]);return k=function(){return n},n}var C=s.a.div(k()),z=s.a.form(S());function T(){var n=Object(c.useContext)(O).setUser,t=Object(c.useState)(""),e=Object(a.a)(t,2),i=e[0],o=e[1],u=Object(c.useState)(""),s=Object(a.a)(u,2),b=s[0],d=s[1],l=Object(c.useState)(""),h=Object(a.a)(l,2),g=h[0],v=h[1],m=Object(c.useState)(""),w=Object(a.a)(m,2),y=w[0],S=w[1],k=Object(j.f)();return Object(r.jsxs)(z,{onSubmit:function(t){S(""),t.preventDefault(),function(n,t,e){return fetch("".concat(p,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:t,password:e})}).then((function(n){return n.json()}))}(g,i,b).then((function(t){if(0===t.ok)return S(t.message);f(t.token),x().then((function(t){if(1!==t.ok)return f(""),S(t.toString());n(t.data),k.push("/")}))}))},children:[Object(r.jsxs)("div",{children:["nickname:",Object(r.jsx)("input",{value:g,onChange:function(n){return v(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["username:",Object(r.jsx)("input",{value:i,onChange:function(n){return o(n.target.value)},required:!0})]}),Object(r.jsxs)("div",{children:["password:",Object(r.jsx)("input",{value:b,type:"password",onChange:function(n){return d(n.target.value)},required:!0})]}),Object(r.jsx)("button",{type:"submit",children:"Sign Up"}),y&&Object(r.jsx)(C,{children:y})]})}function q(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 25px;\n  height: 25px;\n  margin: 0 10px;\n  border: 1px solid #fbfbfb;\n  border-radius: 3px;\n  list-style: none;\n  cursor: pointer;\n  font-size: 20px;\n  &:hover {\n    background: rgba(200, 200, 200, 0.1);\n  }\n"]);return q=function(){return n},n}function _(){var n=Object(u.a)(["\n  display: flex;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  padding: 0;\n"]);return _=function(){return n},n}function A(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n"]);return A=function(){return n},n}function P(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n  text-decoration: none;\n"]);return P=function(){return n},n}function $(){var n=Object(u.a)(["\n  border-bottom: 1px solid rgba(0, 12, 34, 0.2);\n  padding: 16px;\n  display: flex;\n  align-items: flex-end;\n  justify-content: space-between;\n\n  &:hover {\n    background: rgba(200, 200, 200, 0.1);\n  }\n"]);return $=function(){return n},n}function B(){var n=Object(u.a)(["\n  width: 40%;\n  margin: 0 auto;\n"]);return B=function(){return n},n}var D=s.a.div(B()),J=s.a.div($()),L=Object(s.a)(b.b)(P()),U=s.a.div(A()),E=s.a.ul(_()),N=s.a.li(q());function I(n){var t=n.post;return Object(r.jsxs)(J,{children:[Object(r.jsx)(L,{to:"/post/".concat(t.id),children:t.title}),Object(r.jsx)(U,{children:t.createdAt&&new Date(t.createdAt).toLocaleString()})]})}function H(){var n=Object(c.useState)([]),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)([]),u=Object(a.a)(o,2),s=u[0],b=u[1];Object(c.useEffect)((function(){fetch("".concat(p,"/posts?_sort=id&_order=desc")).then((function(n){return n.json()})).then((function(n){var t=Math.ceil(n.length/5);i(function(n){for(var t=[],e=1;e<=n;e++)t.push(e);return t}(t)),h(1).then((function(n){b(n)}))}))}),[]);var j=function(n){return function(){h(n).then((function(n){b(n)}))}};return Object(r.jsxs)(D,{children:[s.length>0?s.map((function(n){return Object(r.jsx)(I,{post:n},n.id)})):Object(r.jsx)(I,{post:{title:"Loading..."}}),Object(r.jsx)(E,{children:s.length>0&&e.map((function(n){return Object(r.jsx)(N,{onClick:j(n),children:n},n)}))})]})}function M(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n"]);return M=function(){return n},n}function R(){var n=Object(u.a)(["\n  color: rgba(0, 0, 0, 0.8);\n  margin-bottom: 20px;\n"]);return R=function(){return n},n}function F(){var n=Object(u.a)(["\n  font-size: 48px;\n  font-weight: bold;\n  color: #333;\n  margin: 10px 0;\n"]);return F=function(){return n},n}function G(){var n=Object(u.a)(["\n  width: 40%;\n  margin: 0 auto;\n  padding-top: 50px;\n"]);return G=function(){return n},n}var K=s.a.div(G()),Q=s.a.div(F()),V=s.a.div(R()),W=s.a.div(M());function X(){var n=Object(c.useState)(""),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(j.h)().id;return Object(c.useEffect)((function(){(function(n){return fetch("".concat(p,"/posts?id=").concat(n)).then((function(n){return n.json()}))})(o).then((function(n){return i(n[0])}))})),Object(r.jsx)(K,{children:Object(r.jsxs)("div",{children:[Object(r.jsx)(Q,{children:e&&e.title}),Object(r.jsx)(V,{children:e&&new Date(e.createdAt).toLocaleString()}),Object(r.jsx)(W,{children:e.body||""})]})})}function Y(){var n=Object(u.a)(["\n  width: 80px;\n  height: 35px;\n  border: none;\n  outline: none;\n  background: rgb(26, 137, 23);\n  cursor: pointer;\n  border-radius: 5px;\n  color: #fff;\n\n  &:hover {\n    background: rgb(12, 110, 15);\n  }\n"]);return Y=function(){return n},n}function Z(){var n=Object(u.a)(["\n  width: 100%;\n  border: none;\n  font-size: 24px;\n  outline: none;\n  resize: none;\n"]);return Z=function(){return n},n}function nn(){var n=Object(u.a)(["\n  border: none;\n  font-size: 40px;\n  font-weight: bold;\n  outline: none;\n  color: #333;\n  margin-bottom: 20px;\n  border-bottom: 2px solid rgba(0, 0, 0, 0);\n  transition: border 0.2s ease-in-out;\n\n  &:focus {\n    border-bottom: 2px solid rgba(0, 0, 0, 0.2);\n  }\n"]);return nn=function(){return n},n}function tn(){var n=Object(u.a)(["\n  width:100%;\n"]);return tn=function(){return n},n}function en(){var n=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: space-between;\n  width: 800px;\n  padding: 20px;\n  margin: 60px auto;\n  border: 1px solid #fbfbfb;\n  box-shadow: 1px 1px 3px #fbfbfb;\n"]);return en=function(){return n},n}function rn(){var n=Object(u.a)(["\n  color: red;\n"]);return rn=function(){return n},n}var cn=s.a.div(rn()),on=s.a.form(en()),an=s.a.div(tn()),un=s.a.input(nn()),sn=s.a.textarea(Z()),bn=s.a.button(Y());function jn(){var n=Object(c.useState)(""),t=Object(a.a)(n,2),e=t[0],i=t[1],o=Object(c.useState)(""),u=Object(a.a)(o,2),s=u[0],b=u[1],d=Object(c.useState)(""),f=Object(a.a)(d,2),h=f[0],x=f[1],O=Object(j.f)();return Object(r.jsxs)(on,{onSubmit:function(n){n.preventDefault(),function(n,t){var e=l();return fetch("".concat(p,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(e)},body:JSON.stringify({title:n,body:t})}).then((function(n){return n.json()}))}(e,s).then((function(n){if(0===n.ok)return x(n.message);O.push("/")}))},children:[Object(r.jsx)(an,{children:Object(r.jsx)(un,{placeholder:"Title",value:e,onChange:function(n){return i(n.target.value)},required:!0})}),Object(r.jsx)(an,{children:Object(r.jsx)(sn,{rows:"10",placeholder:"Tell your story...",value:s,onChange:function(n){return b(n.target.value)},required:!0})}),Object(r.jsx)(bn,{type:"submit",children:"Submit"}),h&&Object(r.jsx)(cn,{children:h})]})}function dn(){var n=Object(u.a)(["\n  font-size: 24px;\n  color: #333;\n"]);return dn=function(){return n},n}function fn(){var n=Object(u.a)(["\n  font-size: 48px;\n  font-weight: bold;\n  text-align: center;\n  color: #333;\n  margin: 10px 0;\n"]);return fn=function(){return n},n}function ln(){var n=Object(u.a)(["\n  width: 40%;\n  margin: 0 auto;\n  padding-top: 50px;\n"]);return ln=function(){return n},n}var pn=s.a.div(ln()),hn=s.a.div(fn()),xn=s.a.div(dn());function On(){return Object(r.jsx)(pn,{children:Object(r.jsxs)("div",{children:[Object(r.jsx)(hn,{children:"About This Blog"}),Object(r.jsx)(xn,{children:"A blog that made up with React, still practing T_T."})]})})}function gn(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n\n  "," {\n    margin-left: 16px;\n  }\n"]);return gn=function(){return n},n}function vn(){var n=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  width: 100px;\n  cursor: pointer;\n  color: black;\n  text-decoration: none;\n\n  ","\n"]);return vn=function(){return n},n}function mn(){var n=Object(u.a)(["\n  display: flex;\n  align-items: center;\n  height: 64px;\n"]);return mn=function(){return n},n}function wn(){var n=Object(u.a)(["\n  color: black;\n  text-decoration: none;\n  user-select: none;\n  font-size: 32px;\n  font-weight: bold;\n"]);return wn=function(){return n},n}function yn(){var n=Object(u.a)(["\n  height: 64px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  border-bottom: 1px solid rgba(0, 0, 0, 0.2);\n  padding: 0 32px;\n  background: white;\n"]);return yn=function(){return n},n}var Sn=s.a.div(yn()),kn=Object(s.a)(b.b)(wn()),Cn=s.a.div(mn()),zn=Object(s.a)(b.b)(vn(),(function(n){return n.$active&&"\n    background: rgba(0,0,0,0.1)\n  "})),Tn=s.a.div(gn(),Cn);function qn(){var n=Object(c.useContext)(O),t=n.user,e=n.setUser,i=Object(j.g)().pathname,o=Object(j.f)();return Object(r.jsxs)(Sn,{children:[Object(r.jsxs)(Tn,{children:[Object(r.jsx)(kn,{to:"/",children:"Blog"}),Object(r.jsxs)(Cn,{children:[Object(r.jsx)(zn,{to:"/",$active:"/"===i,children:"HomePage"}),Object(r.jsx)(zn,{to:"/about",$active:"/about"===i,children:"About"}),t&&Object(r.jsx)(zn,{to:"/new-post",$active:"/new-post"===i,children:"New Post"})]})]}),Object(r.jsxs)(Cn,{children:[!t&&Object(r.jsx)(zn,{to:"/login",$active:"/login"===i,children:"Log in"}),!t&&Object(r.jsx)(zn,{to:"/sign-up",$active:"/sign-up"===i,children:"Sign up"}),t&&Object(r.jsx)(zn,{onClick:function(){f(""),e(null),"/"!==i&&o.push("/")},children:"log out"})]})]})}function _n(){var n=Object(u.a)(["\n  padding-top: 64px;\n"]);return _n=function(){return n},n}var An=s.a.div(_n());var Pn=function(){var n=Object(c.useState)(null),t=Object(a.a)(n,2),e=t[0],i=t[1];return Object(c.useEffect)((function(){l()&&x().then((function(n){n.ok&&i(n.data)}))}),[]),Object(r.jsx)(O.Provider,{value:{user:e,setUser:i},children:Object(r.jsx)(An,{children:Object(r.jsxs)(b.a,{children:[Object(r.jsx)(qn,{}),Object(r.jsxs)(j.c,{children:[Object(r.jsx)(j.a,{exact:!0,path:"/",children:Object(r.jsx)(H,{})}),Object(r.jsx)(j.a,{exact:!0,path:"/login",children:Object(r.jsx)(y,{})}),Object(r.jsx)(j.a,{path:"/post/:id",children:Object(r.jsx)(X,{})}),Object(r.jsx)(j.a,{path:"/new-post",children:Object(r.jsx)(jn,{})}),Object(r.jsx)(j.a,{path:"/about",children:Object(r.jsx)(On,{})}),Object(r.jsx)(j.a,{path:"/sign-up",children:Object(r.jsx)(T,{})})]})]})})})};o.a.render(Object(r.jsx)(Pn,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.d10b881d.chunk.js.map